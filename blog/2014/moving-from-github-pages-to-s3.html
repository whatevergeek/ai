<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"> <title>Moving From Github-Pages to S3 | Slim Pickins Jekyll Theme</title> <meta name="author" content="Chrisanthropic"> <meta name="description" content="Witty description here."> <meta name="keywords" content="jekyll, jekyll theme, jekyll framework, stuffthings"> <link href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/css/main.css" media="screen, projection" rel="stylesheet" type="text/css"> <link rel="canonical" href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/blog/2014/moving-from-github-pages-to-s3"> <link href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/favicon.ico" rel="icon"> <link rel="alternate" type="application/atom+xml" title="Slim Pickins Jekyll Theme" href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/atom.xml"/> <!-- Social media content metadata --> <meta property="twitter:card" content="summary" /> <meta property="twitter:site" content="" /> <meta property="twitter:url" content="https://chrisanthropic.github.io/slim-pickins-jekyll-theme" /> <meta property="twitter:title" content="Moving From Github-Pages to S3" /> <meta property="twitter:description" content="Witty description here." /> <meta property="twitter:creator" content="" /> <meta property="twitter:image:src" content="" /> </head> <body> <main class="wrap"> <header role="banner"> <a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/"><img src="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/images/banner-xl.jpg" srcset="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/images/banner-small.jpg 200w, https://chrisanthropic.github.io/slim-pickins-jekyll-theme/images/banner-med.jpg 641w, https://chrisanthropic.github.io/slim-pickins-jekyll-theme/images/banner-large.jpg 1025w, https://chrisanthropic.github.io/slim-pickins-jekyll-theme/images/banner-xl.jpg 1441w" alt="Slim Pickins Jekyll Theme banner image" title="Slim Pickins Jekyll Theme banner image" class="center"></a> </header> <nav class="navbar"> <nav class="row"> <div id="nav"> <ul class="columns medium-8 left primary-nav"> <li id="toggleMenu"><a href="#nav">Menu</a></li> <li id="hideMenu"><a href="#toggleMenu">Menu</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/">home</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/blog/">blog</a></li> <li class="dropdown"> <a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme">documentation</a> <ul> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/sass.html">sass</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/grid.html">grid</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/nav.html">navigation</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/banner.html">banner</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/footer.html">sticky footer</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/rakefile.html">rakefile</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/image-optim.html">image_optim</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/seo.html">SEO</a></li> </ul> </li> <li class="dropdown"> <a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme">use</a> <ul> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/installation.html">installation</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/configuration.html">configuration</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/deploy.html">deployment</a></li> <li><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/documentation/use.html">basic use</a></li> </ul> </li> <li><a href="http://www.jekyllrb.com">external</a></li> <li class="dropdown"> <a href="http://localhost:4000">Misc</a> <ul> <li><a href="https://talk.jekyllrb.com/">Jekyll forums</a></li> <li><a href="https://github.com/chrisanthropic/slim-pickins-jekyll-theme">Source Code</a></li> </ul> </li> </ul> <ul class="columns medium-4 right primary-nav"> <li class="right"><a href="https://chrisanthropic.github.io/slim-pickins-jekyll-theme/atom.xml"><span class="icon-feed socials"></span></a></li> <li class="right"><a href="#"><span class="icon-googleplus socials"></span></a></li> <li class="right"><a href="#"><span class="icon-facebook socials"></span></a></li> <li class="right"><a href="#"><span class="icon-tumblr socials"></span></a></li> <li class="right"><a href="https://twitter.com/"><span class="icon-twitter socials"></span></a></li> <li class="right"><a href="https://github.com/chrisanthropic/slim-pickins-jekyll-theme"><span class="icon-github socials"></span></a></li> <li class="right"><a href="https://www.linkedin.com/in/ctarwater"><span class="icon-linkedin socials"></span></a></li> </ul> </div> </nav> </nav> <article class="row post-content"> <header class="post-header"> <h1 class="post-title">Moving From Github-Pages to S3</h1> <p class="post-meta">Dec 4, 2014</p> </header> <p>I decided to move from free github-pages hosting to dirt cheap AWS S3 hosting. I also decided to move my DNS from namecheap to the free CloudFlare plan. Here’s the steps I took to transfer everything over.</p> <p>Most of the steps were adapted from here <a href="http://blog.mindthecloud.com/2014/08/31/create-your-static-blog-from-scratch-in-1-hour.html">http://blog.mindthecloud.com/2014/08/31/create-your-static-blog-from-scratch-in-1-hour.html</a></p> <h2 id="prepare-aws">Prepare AWS</h2> <ul> <li>Login to AWS S3 and create a bucket called <code class="highlighter-rouge">www.YOURSITE.com</code> (This is important for CNAME/DNS record stuff) <ul> <li>Make sure you select the <code class="highlighter-rouge">US Standard</code> region</li> </ul> </li> <li>Create a new policy for the bucket that gives everyone read-only access so they can view the site</li> </ul> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
	"Version": "2008-10-17",
	"Statement": [
		{
			"Sid": "AddPerm",
			"Effect": "Allow",
			"Principal": "*",
			"Action": "s3:GetObject",
			"Resource": "arn:aws:s3:::NAME-OF-BUCKET/*"
		}
	]
}
</code></pre></div></div> <ul> <li>Select the bucket you created and choose <code class="highlighter-rouge">options</code></li> <li>Go to the <code class="highlighter-rouge">Static Website Hosting</code> tab and enable it.</li> <li>Enter <code class="highlighter-rouge">index.html</code> for <code class="highlighter-rouge">index document</code> and <code class="highlighter-rouge">404.html</code> for <code class="highlighter-rouge">error document</code></li> <li>Login to <a href="https://console.aws.amazon.com/iam">AWS IAM console</a></li> <li>Create new user with full access to S3 <ul> <li>Create new user</li> <li>Choose <code class="highlighter-rouge">attach user policy</code></li> <li>Choose <code class="highlighter-rouge">custom policy</code> and enter the following code:</li> </ul> </li> </ul> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "Statement": [
    {
      "Action": [
        "s3:*"
      ],
      "Effect": "Allow",
      "Resource": [
        "arn:aws:s3:::NAME-OF-BUCKET",
        "arn:aws:s3:::NAME-OF-BUCKET/*"
      ]
    }
  ]
}
</code></pre></div></div> <ul> <li>The above policy gives the user you created full access to the bucket you created to host your site. This is the user that will be used to deploy your site.</li> </ul> <h2 id="setup-octopress-deploy">setup octopress-deploy</h2> <ul> <li>run <code class="highlighter-rouge">octopress deploy init s3</code> to create default <code class="highlighter-rouge">deploy.yml</code> file</li> <li>Enter the user credentials in the <code class="highlighter-rouge">deploy.yml</code> file</li> <li>Run <code class="highlighter-rouge">octopress deploy</code></li> </ul> <h2 id="check-your-work">Check your work</h2> <ul> <li>Go to AWS / S3, open your bucket, and choose <code class="highlighter-rouge">properties</code></li> <li>There should be a link listed as <code class="highlighter-rouge">Endpoint</code>, go to that link and you should see your blog!</li> </ul> <h2 id="edit-namecheap-cname-record">Edit namecheap cname record</h2> <ul> <li>All host records <ul> <li>@ points to <code class="highlighter-rouge">www.chrisanthropic.com</code> and is a <code class="highlighter-rouge">URL Redirect</code></li> <li>hostname <code class="highlighter-rouge">www</code> points to bucket Endpoint (rather than github.io) and is a <code class="highlighter-rouge">CNAME (Alias)</code></li> </ul> </li> </ul> <h2 id="remove-github-site">Remove Github site</h2> <p>I deleted the github version so for now only the source lives there</p> <ul> <li>Delete master or gh-pages branch so that only the source remains</li> </ul> <h2 id="use-cloudflare">Use Cloudflare</h2> <ul> <li>Login to CloudFlare</li> <li>add your domain <ul> <li>Your CNAME and A records should be listed and ‘active’</li> </ul> </li> <li>Select the free plan, CDN only, and Medium security.</li> </ul> <h2 id="update-your-dns-records">Update your DNS Records</h2> <ul> <li>Login to your DNS provider (I use Namecheap)</li> <li>Remove all other DNS providers and add the two that CloudFlare told you to</li> </ul> </article> </main> <footer class="site-footer"> <div class="row"> <div class="small-6 columns"> </div> <div class="small-6 columns"> </div> </div> </footer> </body> </html>
